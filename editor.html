<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>baimage</title>
    <link rel="icon" href="/image/icon/bgimage.png" type="image/x-icon"/>
    <script src="https://cdn.bootcss.com/html2canvas/0.5.0-beta4/html2canvas.js"></script>
    <script type="text/javascript" src="jquery.min.js"></script>
    <link rel="stylesheet" href="bgstyle.css">
    <link rel="stylesheet" href="style.css">
    <script  type="text/javascript" src="backimage.js"></script>
    <script src="./plugs/minicolor/colorpicker.js"></script>
    <script src="./plugs/domtoimage/canvas2svg.js"></script>
    <script>
        // 百度统计
        var _hmt = _hmt || [];
        (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?60803f9ca4e54b47471b79db84664a2b";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
        })();
    </script>
    <script src="//at.alicdn.com/t/font_2344911_d3anb8ucud.js"></script>
</head>
<body>
    <div class="header">
        <div class="logo">
            <a href="http://backimg.cn/">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-yinqing_tuceng-copy"></use>
                </svg>
                <span style="margin-left:10px;">BACKIMG</span>
            </a>
        </DIV>
        <ul class="nav">
            <li>
                <a href="http://backimg.cn/"><span>首页</span></a>
            </li>
            <li>
                <a href="editor.html"><span>编辑</span></a>
            </li>
            <li>
                <a href="https://github.com/kuaidy/BackImg"><span>Github</span></a>
            </li>
        </ul>
    </div>
    <div id="main">
        <!-- 背景图设置 -->
        <div id="GenerateImage">
            <!-- <div id=header>
                <span>BGImage</span>
                <span style="font-size:12px;color:#fff;position: relative;top: -5px;left: 5px;background-color: crimson;padding: 0px 2px;border-radius: 2px;">beta</span>
            </div>
            <hr /> -->
            <div id="setwidth" class="setting">
                <span>背景宽度</span>
                <input type="text" placeholder="auto" id="bgwidth" class="FormControl"></input>
            </div>
            <div id="setheight" class="setting">
                <span>背景高度</span>
                <input type="text" placeholder="auto" id="bgheight" class="FormControl">
            </div>
            <div id="setbgcolor" class="setting">
                <span>背景色</span>
                <!-- <input type="color" id="bgcolor" class="FormControl"> -->
                <!-- <input type="text" id="position-bottom-left" class="demo" data-position="bottom left" value="#0088cc"> -->
                <!-- <button id="colorpicker">Show Color Picker</button> -->
                <!-- <input id="cpFocus" value="#8db3e2" /> -->
                <div class="picker" id="color-picker" class="FormControl" style="width:100px;height:30px;"></div>
            </div>
            <div id="SelectColor" class="setting">
                <button class="Option">配色推荐</button>
            </div>
            <!-- <div>
                <button id="fenhong" style="background-color:#ffb3a7;width:20px;height:20px;border:0px;" value="#ffb3a7"></button>
                <button id="ehuang" style="background-color:#fff143;width:20px;height:20px;border:0px;" value="#fff143"></button>
                <button id="nenglv" style="background-color:#bddd22;width:20px;height:20px;border:0px;" value="#bddd22"></button>
                <button id="lan" style="background-color:#44cef6;width:20px;height:20px;border:0px;" value="#44cef6"></button>
                <button id="cang" style="background-color:#75878a;width:20px;height:20px;border:0px;" value="#75878a"></button>
                <button id="shui" style="background-color:#88ada6;width:20px;height:20px;border:0px;" value="#88ada6"></button>
                <button id="xiangyabai" style="background-color:#fffbf0;width:20px;height:20px;border:0px;" value="#fffbf0"></button>
                <button id="xuan" style="background-color:#622a1d;width:20px;height:20px;border:0px;" value="#622a1d"></button>
                <button id="chijin" style="background-color:#f2be45;width:20px;height:20px;border:0px;" value="#f2be45"></button>
            </div> -->
            <div id="setBackImg" class="setting">
                <input type="file" accept="image/png, image/jpeg,image/jpg" id="localbgimg"></input>
            </div>

            <hr />
            <!-- <div id="setbgimg" class="setting">
                <span>网络图片</span>
                <input type="text" placeholder="请输入图标链接地址" id="bgicon" class="FormControl">
            </div> -->
            <div id="setIcon" class="setting">
                <input type="file" accept="image/png, image/jpeg,image/jpg" id="localbgicon"></input>
            </div>
            <div id="setIconHeight" class="setting">
                <span>图标宽度</span>
                <input type="text" placeholder="auto" id="bgiconwidth" class="FormControl">
            </div>
            <div id="setIconHeight" class="setting">
                <span>图标高度</span>
                <input type="text" placeholder="auto" id="bgiconheight" class="FormControl">
            </div>
            <div id="SelectIcon" class="setting">
                <button class="Option">图标推荐</button> 
            </div>
            <button id="GetMainColor" class="Option">获取主题色</button>
            <hr />
            <div id="setTextContent" class="setting">
                <span>文字内容</span>
                <input type="text" placeholder="请输入内容" id="TextContent" class="FormControl">
            </div>
            <div id="setTextSize" class="setting">
                <span>文字大小</span>
                <input type="number" id="TextSize" class="FormControl" value="15">
            </div>
            <!-- <div id="setTextType" class="setting">
                <span>文字类型</span>
                <select name="" id="Texttype">
                        <option value="" data-width="750" data-height="375">网易大图模式</option>
                        <option value="" data-width="710" data-height="354">少数派</option>
                        <option value="" data-width="200" data-height="96">大鱼号封面</option>
                        <option value="" data-width="360" data-height="270">企鹅号</option>
                        <option value="" data-width="660" data-height="370">百家号</option>
                </select>
            </div> -->
            <div id="setTextColor" class="setting">
                <span>文字颜色</span>
                <input type="color" id="TextColor" class="FormControl">
            </div>
            <div id="setTextColor" class="setting">
                <span>文字字体</span>
                <input id="TextFontFamily" type="text" list="typelist" placeholder="请选择" class="FormControl">
                <datalist id="typelist">
                　　<option>宋体</option>
                　　<option>黑体</option>
                    <option>微软雅黑</option>
                    <option>楷体</option>
                    <option>隶书</option>
                </datalist>
            </div>
            <div id="setTextStyle" class="setting">
                <span>文字风格</span>
                <select name="" id="TextStyleType" class="SelectControl">
                    <option value="">自定义</option>
                    <option value="youtube">Youtube风格</option>
                    <option value="google">Google风格</option>
                </select>
            </div>
            <!-- <div id="setbgimg" class="setting">
                <input type="checkbox" value="图标平铺">图标平铺</input>
            </div> -->
            <hr />
            <div id="setWaterMark" class="setting">
                <span>水印文字</span>
                <input type="text" placeholder="请输入内容" id="ip_WaterMarkText" class="FormControl">
            </div>
            <div id="useWaterMark" class="setting">
                <span>使用水印</span>
                <input type="checkbox" id="ip_UseWaterMark" class="FormControl">
            </div>
            <hr />
            <!-- 图片添加阴影效果 -->
            <div id="ShadowX" class="setting">
                <span>X轴偏移</span>
                <input type="number" id="SetShadowX" class="FormControl">
            </div>
            <div id="ShadowY" class="setting">
                <span>Y轴偏移</span>
                <input type="number" id="SetShadowY" class="FormControl">
            </div>
            <div id="ShadowSize" class="setting">
                <span>模糊尺寸</span>
                <input type="number" id="SetShadowSize" class="FormControl">
            </div>
            <div id="ShadowColor" class="setting">
                <span>阴影颜色</span>
                <input type="color" id="SetShadowColor" class="FormControl">
            </div>
            <hr />
            <div id="setbgtype" class="setting">
                <span>平台选择</span>
                <select name="" id="ChangeType">
                    <option value="">自定义</option>
                    <option value="" data-width="750" data-height="375">网易大图封面</option>
                    <option value="" data-width="1125" data-height="633">网易视频封面</option>
                    <option value="" data-width="710" data-height="354">少数派</option>
                    <option value="" data-width="200" data-height="96">大鱼号封面</option>
                    <option value="" data-width="360" data-height="270">企鹅号</option>
                    <option value="" data-width="660" data-height="370">百家号文章封面</option>
                    <option value="" data-width="720" data-height="450">百家号视频封面</option>
                    <option value="" data-width="960" data-height="600">b站视频封面</option>
                    <option value="" data-width="1920" data-height="1080">头条视频封面</option>
                    <option value="" data-width="1280" data-height="720">知乎视频封面</option>
                </select>
            </div>
            <div id="PictureType" class="setting">
                <span>图片格式</span>
                <select name="" id="ChangePicType">
                    <option value="" data-type="png">png</option>
                    <option value="" data-type="jpg">jpg</option>
                    <option value="" data-type="webp">webp</option>
                    <!-- <option value="" data-type="svg">svg</option> -->
                    <option value="" data-type="gif">gif</option>
                </select>
            </div>
            <div id="OptionItems" class="setting">
                <!-- <button id="Generate">随机生成</button> -->
                <button id="reset" class="Option">重制</button>
                <button id="download" class="Option">下载</button>
                <!-- <button>公开</button> -->
            </div>
            <div id="footer" class="setting">
                <span><a href="https://support.qq.com/products/42094">意见反馈</a></span>
                <span>V 2.0.0</span>
            </div>
        </div>
        <!-- 背景图预览 -->
        <div id="ImageShow">
            <div id="Imageid" class="ImageItem">
                <h3 id="lb_note">在此处粘贴图标(Ctrl+V)</h3>
                <div class="div_ImgContent">
                    <img id="ImageBgicon" src="" alt="">
                    <span id="ImageText"></span>
                </div>
            </div>
        </div>

        <div id="ImageOption">
            
        </div>
        <div id="ImageIconColor"></div>
        
        <!-- <div id="ImageDown"></div> -->
        <div id="graybackground" contentEditable>
        </div>
        <div id="iconurl" ></div>
        <div id="colorurl"></div>
    </div>
</body>

<script >
//复制粘贴图片
document.addEventListener("paste", function (e) {
    var cbd = e.clipboardData;
    var ua = window.navigator.userAgent;
    // 如果是 Safari 直接 return
    if ( !(e.clipboardData && e.clipboardData.items) ) {
        return;
    }
    // Mac平台下Chrome49版本以下 复制Finder中的文件的Bug Hack掉
    if(cbd.items && cbd.items.length === 2 && cbd.items[0].kind === "string" && cbd.items[1].kind === "file" &&
        cbd.types && cbd.types.length === 2 && cbd.types[0] === "text/plain" && cbd.types[1] === "Files" &&
        ua.match(/Macintosh/i) && Number(ua.match(/Chrome\/(\d{2})/i)[1]) < 49){
        return;
    }

    var blob;
    for(var i = 0; i < cbd.items.length; i++) {
        var item = cbd.items[i];
        if(item.kind == "file"){
            blob= item.getAsFile();
            if (blob.size === 0) {
                return;
            }
        }
    }
    
    var reader=new FileReader();
    // blob 就是从剪切板获得的文件 可以进行上传或其他操作
    reader.readAsDataURL(blob);

    reader.addEventListener("load", function () {
        $('#ImageBgicon').attr("src", reader.result);
        $("#lb_note").hide();
    }, false);
});
</script>
</html>